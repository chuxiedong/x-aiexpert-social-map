# X AI Influencers 产品建设文档（以 x.mitbunny.ai 为主）

版本：v1.0  
更新时间：2026-02-20  
项目路径：`/Users/somalia/Desktop/x-ai-experts-viz`

---

## 1. 建设目标

以 `x.mitbunny.ai` 为主站进行复刻，要求主站核心功能不缺失；在此基础上叠加本地运营能力（趋势、排名变化、手工修正、自动更新）。

核心原则：
- 主站功能优先：图谱交互、筛选、详情、方法论、移动端行为。
- 本地能力辅助：数据更新流水线、历史快照、运营增强模块。
- 交付可运行：本地 HTML 一页应用 + 可更新数据脚本 + 可执行文档。

---

## 2. 目标站功能基线（Must Have）

基于目标站代码与交互抽取的核心功能：
1. 左侧榜单：搜索、排名列表、点击联动图谱、Creator 卡、侧栏收起/展开。
2. 图谱主舞台：默认全关系网络、节点点击高亮关联、背景点击清空。
3. 图谱交互：支持拖拽/缩放/旋转视角（Orbit 风格）。
4. 图例筛选：五大分组（company/founder/researcher/investor/media）+ 清除筛选。
5. 详情卡：头像、名称、handle、角色、简介、website/location/joined/followers/following、Follow 按钮。
6. Methodology：发现与筛选逻辑、评分公式、图谱解释、反馈入口。
7. 移动端适配：侧栏与详情布局自动切换。

---

## 3. 功能对照（目标站 -> 本项目）

| 模块 | 目标站要求 | 本项目实现 | 状态 |
|---|---|---|---|
| 左侧榜单与搜索 | 按名称/handle/角色检索并联动 | 已支持名称/handle/角色/标签/bio 搜索，点击联动 | 完成 |
| Creator 入口 | 创作者信息单独入口 | 已实现 `@Jenny_the_Bunny` 入口与详情卡 | 完成 |
| 图谱核心交互 | 点击节点高亮，背景清空 | 已实现节点选中高亮、背景清空 | 完成 |
| 图谱视角交互 | Orbit 风格浏览 | 已新增 3D 图谱模式（ForceGraph3D） | 完成 |
| 图谱降级能力 | 弱网/库加载失败兜底 | 保留 2D SVG 模式可切换 | 完成 |
| 图例分类 | 5 类分组筛选 + 清除 | 已实现，并映射中文标签 | 完成 |
| 方法论弹窗 | 评分公式与流程 | 已实现，含 seed + score 解释 | 完成 |
| 详情卡字段 | handle/bio/website/location/joined/followers/following | 已实现全字段 | 完成 |
| 移动端 | 侧栏可开关 | 已实现移动端侧栏行为 | 完成 |
| 数据主源 | 目标站 nodes+links | `mitbunny_graph.json`（300/3042） | 完成 |
| 本地增强 | 趋势/排名变化 | 已实现趋势模式与排名变化 | 完成 |

---

## 4. 当前系统架构

### 4.1 前端（单页）
- 文件：`/Users/somalia/Desktop/x-ai-experts-viz/index.html`
- 结构：
  1. Sidebar（搜索、分类、榜单、Creator、数据来源）
  2. Stage（3D/2D 图谱舞台 + Legend + 方法论入口）
  3. Insights（Top10、语种分布、趋势、排名变化）
  4. Detail Card / Method Modal

### 4.2 数据层（主从分层）
- 主数据（目标站）：`/Users/somalia/Desktop/x-ai-experts-viz/data/mitbunny_graph.json`
  - `nodes[]` + `links[]`
- Top300 排名导出：`/Users/somalia/Desktop/x-ai-experts-viz/data/top300.json`
  - `experts[]`（含 `rank/score/followers/connections`）
- Top300 表格导出：`/Users/somalia/Desktop/x-ai-experts-viz/data/top300.csv`
  - 便于运营和分析团队直接使用
- 辅数据（本地增强）：`/Users/somalia/Desktop/x-ai-experts-viz/data/experts.json`
  - 本地分类/标签、history、rank_changes
- 历史快照：`/Users/somalia/Desktop/x-ai-experts-viz/data/history.json`
- 人工修正：`/Users/somalia/Desktop/x-ai-experts-viz/data/manual_experts.json`

### 4.3 更新脚本
- 主图谱更新：`/Users/somalia/Desktop/x-ai-experts-viz/scripts/update_mitbunny_graph.py`
- 辅能力更新：`/Users/somalia/Desktop/x-ai-experts-viz/scripts/update_experts.py`

---

## 5. 数据与运行流程

1. 更新主图谱（必须）
```bash
python3 /Users/somalia/Desktop/x-ai-experts-viz/scripts/update_mitbunny_graph.py
```

2. 更新本地增强（建议）
```bash
python3 /Users/somalia/Desktop/x-ai-experts-viz/scripts/update_experts.py --limit 60 --manual /Users/somalia/Desktop/x-ai-experts-viz/data/manual_experts.json
```

3. 启动本地服务
```bash
cd /Users/somalia/Desktop/x-ai-experts-viz
python3 -m http.server 8765
```

4. 访问
- `http://127.0.0.1:8765/`

---

## 6. 验收标准（主站不减配）

P0（必须全过）：
1. 页面可加载目标图谱数据（nodes/links）。
2. 页面默认专家池为 Top300（未搜索/未筛选时 count=300）。
3. 左侧榜单、搜索、分类筛选均可用。
4. 图谱支持点击节点高亮关联，背景清空。
5. 图谱支持可浏览视角（3D 模式可用；不可用时自动降级 2D）。
6. 详情卡字段完整，Follow 可跳转。
7. Methodology 弹窗可打开/关闭。
8. 移动端侧栏可收起/展开。

P1（增强）：
1. 趋势模式：自动/快照/日/周切换。
2. 排名变化可展示（NEW/+/-）。
3. 图例折叠与清除筛选可用。
4. 顶栏“立即刷新”按钮可手动重载数据。

---

## 7. 版本说明（本次交付）

截至 2026-02-20，本次完成：
1. 目标站主图谱数据对齐：`300 nodes / 3042 links`。
2. 图谱主能力对齐：新增 3D 图谱模式（Orbit 交互、点击聚焦、背景清空、关系高亮）。
3. 可靠性增强：保留 2D 图谱兜底，防止 3D 依赖加载失败导致页面不可用。
4. Top300 交付增强：新增 `top300.json` 与 `top300.csv` 双导出。
5. 运营增强保留：趋势、排名变化、手工修正、自动刷新 + 手动刷新。

---

## 8. 下一阶段（在主功能不退化前提下）

1. 社群检测：自动聚类并给出“子社区标签”。
2. 关系分析：两账号最短路径与桥接节点识别。
3. 导出能力：图谱快照导出 PNG/PDF。
4. 运营监控：头部集中度、类别占比、增长异常提醒。
